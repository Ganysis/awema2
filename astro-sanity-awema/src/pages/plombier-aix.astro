---
import Base from "@/layouts/Base.astro";
import { Image } from "astro:assets";
import data from "@/content/plombier-aix/data.json";

const { business, hero, services, testimonials, faq, zones, gallery, seo } = data;
---

<Base meta_title={seo.title} meta_description={seo.description}>
  <!-- Hero Section -->
  <section class="section pt-20 md:pt-32 pb-12 bg-gradient-to-br from-blue-50 to-white relative overflow-hidden">
    <div class="container">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <!-- Left: Content -->
        <div data-aos="fade-right">
          <div class="inline-flex items-center bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium mb-4">
            ‚ö° Intervention Urgence 24/7
          </div>

          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight">
            {hero.headline}
          </h1>

          <p class="text-xl text-gray-600 mb-8">
            {hero.subheadline}
          </p>

          <!-- Trust Badges -->
          <div class="grid grid-cols-2 gap-3 mb-8">
            {hero.trustBadges.map(badge => (
              <div class="flex items-center text-sm text-gray-700">
                <span class="mr-2">{badge.split(' ')[0]}</span>
                <span>{badge.split(' ').slice(1).join(' ')}</span>
              </div>
            ))}
          </div>

          <!-- CTA Buttons -->
          <div class="flex flex-wrap gap-4">
            <a
              href={`tel:${hero.ctaPhone.replace(/\s/g, '')}`}
              class="inline-flex items-center justify-center px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-lg hover:shadow-xl transition-all text-lg"
            >
              üìû {hero.ctaPhone}
            </a>
            <a
              href="#contact"
              class="inline-flex items-center justify-center px-8 py-4 bg-white border-2 border-blue-600 text-blue-600 hover:bg-blue-50 font-bold rounded-lg shadow-lg hover:shadow-xl transition-all text-lg"
            >
              {hero.ctaSecondary}
            </a>
          </div>
        </div>

        <!-- Right: Image -->
        <div data-aos="fade-left" data-aos-delay="200" class="relative">
          <img
            src={hero.image}
            alt="Plombier professionnel √† Aix-en-Provence"
            class="rounded-2xl shadow-2xl w-full h-auto"
            loading="eager"
          />
          <div class="absolute -bottom-6 -left-6 bg-white rounded-lg shadow-xl p-6 max-w-xs">
            <div class="flex items-center mb-2">
              <span class="text-3xl font-bold text-blue-600">{business.yearsExperience}</span>
              <span class="text-lg ml-2 text-gray-600">ans d'exp√©rience</span>
            </div>
            <p class="text-sm text-gray-500">Artisan local de confiance</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="section py-20 bg-white" id="services">
    <div class="container">
      <div class="text-center mb-16" data-aos="fade-up">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">
          Nos Services de Plomberie √† Aix-en-Provence
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Intervention rapide, travail soign√©, prix transparents. Votre satisfaction est notre priorit√©.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {services.map((service, index) => (
          <div
            class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all p-8 border border-gray-100"
            data-aos="fade-up"
            data-aos-delay={100 + index * 50}
          >
            <div class="text-5xl mb-4">{service.icon}</div>
            <h3 class="text-2xl font-bold text-gray-900 mb-3">{service.name}</h3>
            <p class="text-gray-600 mb-6">{service.description}</p>

            <img
              src={service.image}
              alt={service.name}
              class="w-full h-48 object-cover rounded-lg mb-6"
              loading="lazy"
            />

            <ul class="space-y-2 mb-6">
              {service.features.map(feature => (
                <li class="flex items-start text-sm text-gray-700">
                  <span class="text-green-500 mr-2 mt-1">‚úì</span>
                  <span>{feature}</span>
                </li>
              ))}
            </ul>

            <div class="pt-4 border-t border-gray-200">
              <p class="text-sm font-semibold text-blue-600">{service.priceRange}</p>
            </div>
          </div>
        ))}
      </div>

      <div class="text-center mt-12" data-aos="fade-up">
        <a
          href="#contact"
          class="inline-flex items-center justify-center px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-lg hover:shadow-xl transition-all"
        >
          Demander un Devis Gratuit
        </a>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="section py-20 bg-gray-50">
    <div class="container">
      <div class="text-center mb-16" data-aos="fade-up">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">
          Ils Nous Font Confiance
        </h2>
        <div class="flex items-center justify-center mb-4">
          <div class="flex text-yellow-400 text-2xl">
            ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
          </div>
          <span class="ml-3 text-xl text-gray-600">4.9/5 - 127 avis Google</span>
        </div>
        <p class="text-lg text-gray-600">Des clients satisfaits partout √† Aix-en-Provence</p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {testimonials.map((testimonial, index) => (
          <div
            class="bg-white rounded-xl shadow-lg p-8"
            data-aos="fade-up"
            data-aos-delay={100 + index * 50}
          >
            <div class="flex items-center mb-4">
              <img
                src={testimonial.avatar}
                alt={testimonial.name}
                class="w-12 h-12 rounded-full mr-4"
              />
              <div>
                <h4 class="font-bold text-gray-900">{testimonial.name}</h4>
                <p class="text-sm text-gray-500">{testimonial.location}</p>
              </div>
            </div>

            <div class="flex text-yellow-400 mb-3">
              {[...Array(testimonial.rating)].map(() => '‚≠ê')}
            </div>

            <p class="text-gray-700 mb-4 italic">"{testimonial.text}"</p>

            <div class="flex items-center justify-between text-sm">
              <span class="text-blue-600 font-medium">{testimonial.service}</span>
              <span class="text-gray-400">{testimonial.date}</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Gallery Section -->
  <section class="section py-20 bg-white">
    <div class="container">
      <div class="text-center mb-16" data-aos="fade-up">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">
          Nos R√©alisations √† Aix-en-Provence
        </h2>
        <p class="text-xl text-gray-600">
          Des chantiers soign√©s, des clients satisfaits
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {gallery.map((item, index) => (
          <div
            class="relative group overflow-hidden rounded-xl shadow-lg"
            data-aos="zoom-in"
            data-aos-delay={100 + index * 50}
          >
            <img
              src={item.image}
              alt={item.title}
              class="w-full h-80 object-cover group-hover:scale-110 transition-transform duration-500"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
              <div class="text-white">
                <h3 class="text-xl font-bold mb-1">{item.title}</h3>
                <p class="text-sm opacity-90">üìç {item.location}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="section py-20 bg-gray-50">
    <div class="container">
      <div class="text-center mb-16" data-aos="fade-up">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">
          Questions Fr√©quentes
        </h2>
        <p class="text-xl text-gray-600">
          Tout ce que vous devez savoir sur nos services
        </p>
      </div>

      <div class="max-w-4xl mx-auto space-y-4">
        {faq.map((item, index) => (
          <details
            class="bg-white rounded-xl shadow-lg p-6 group"
            data-aos="fade-up"
            data-aos-delay={50 + index * 30}
          >
            <summary class="font-bold text-lg text-gray-900 cursor-pointer flex items-center justify-between">
              <span>{item.question}</span>
              <span class="text-blue-600 text-2xl group-open:rotate-180 transition-transform">‚ñº</span>
            </summary>
            <p class="mt-4 text-gray-600 leading-relaxed">{item.answer}</p>
          </details>
        ))}
      </div>
    </div>
  </section>

  <!-- Zones Section -->
  <section class="section py-12 bg-blue-600 text-white">
    <div class="container">
      <div class="text-center mb-8">
        <h3 class="text-2xl font-bold mb-4">Zones d'Intervention</h3>
        <p class="text-blue-100 mb-6">Nous intervenons rapidement dans toute la r√©gion d'Aix-en-Provence</p>
      </div>
      <div class="flex flex-wrap justify-center gap-3 max-w-4xl mx-auto">
        {zones.map(zone => (
          <span class="bg-white/20 backdrop-blur px-4 py-2 rounded-full text-sm font-medium">
            üìç {zone}
          </span>
        ))}
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="section py-20 bg-white" id="contact">
    <div class="container">
      <div class="max-w-5xl mx-auto">
        <div class="grid lg:grid-cols-2 gap-12">
          <!-- Left: Contact Info -->
          <div data-aos="fade-right">
            <h2 class="text-4xl font-bold text-gray-900 mb-6">
              Contactez-Nous
            </h2>
            <p class="text-xl text-gray-600 mb-8">
              Besoin d'un plombier √† Aix-en-Provence ? Nous sommes l√† pour vous aider.
            </p>

            <div class="space-y-6">
              <div class="flex items-start">
                <div class="bg-blue-100 rounded-lg p-3 mr-4">
                  <span class="text-2xl">üìû</span>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900 mb-1">T√©l√©phone</h3>
                  <a href={`tel:${business.phone.replace(/\s/g, '')}`} class="text-blue-600 hover:text-blue-700 text-lg font-semibold">
                    {business.phone}
                  </a>
                  <p class="text-sm text-gray-500">Disponible 24h/24, 7j/7</p>
                </div>
              </div>

              <div class="flex items-start">
                <div class="bg-blue-100 rounded-lg p-3 mr-4">
                  <span class="text-2xl">‚úâÔ∏è</span>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900 mb-1">Email</h3>
                  <a href={`mailto:${business.email}`} class="text-blue-600 hover:text-blue-700">
                    {business.email}
                  </a>
                  <p class="text-sm text-gray-500">R√©ponse sous 2h</p>
                </div>
              </div>

              <div class="flex items-start">
                <div class="bg-blue-100 rounded-lg p-3 mr-4">
                  <span class="text-2xl">üìç</span>
                </div>
                <div>
                  <h3 class="font-bold text-gray-900 mb-1">Adresse</h3>
                  <p class="text-gray-600">{business.address}</p>
                  <p class="text-sm text-gray-500">{business.interventionZone}</p>
                </div>
              </div>

              <div class="bg-blue-50 rounded-xl p-6 mt-8">
                <h3 class="font-bold text-gray-900 mb-3">Certifications</h3>
                <div class="flex flex-wrap gap-2">
                  {business.certifications.map(cert => (
                    <span class="bg-white px-3 py-1 rounded-full text-sm font-medium text-gray-700">
                      ‚úì {cert}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>

          <!-- Right: Contact Form -->
          <div data-aos="fade-left" data-aos-delay="200">
            <form class="bg-gray-50 rounded-2xl shadow-xl p-8">
              <h3 class="text-2xl font-bold text-gray-900 mb-6">Demande de Devis Gratuit</h3>

              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Votre nom *</label>
                  <input
                    type="text"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Jean Dupont"
                  />
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">T√©l√©phone *</label>
                  <input
                    type="tel"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="06 12 34 56 78"
                  />
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                  <input
                    type="email"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="jean.dupont@email.fr"
                  />
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Type d'intervention *</label>
                  <select
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value="">S√©lectionnez un service</option>
                    {services.map(service => (
                      <option value={service.id}>{service.name}</option>
                    ))}
                  </select>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Votre message *</label>
                  <textarea
                    required
                    rows="4"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="D√©crivez votre probl√®me ou votre projet..."
                  ></textarea>
                </div>

                <button
                  type="submit"
                  class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-lg shadow-lg hover:shadow-xl transition-all"
                >
                  Envoyer ma demande
                </button>

                <p class="text-xs text-gray-500 text-center">
                  En soumettant ce formulaire, vous acceptez d'√™tre contact√© par nos services.
                </p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="section py-16 bg-gradient-to-r from-blue-600 to-blue-700 text-white">
    <div class="container">
      <div class="text-center max-w-3xl mx-auto">
        <h2 class="text-3xl md:text-4xl font-bold mb-4" data-aos="fade-up">
          Urgence Plomberie √† Aix-en-Provence ?
        </h2>
        <p class="text-xl mb-8 opacity-90" data-aos="fade-up" data-aos-delay="100">
          Intervention rapide ‚Ä¢ Tarifs transparents ‚Ä¢ Travail garanti
        </p>
        <a
          href={`tel:${business.phone.replace(/\s/g, '')}`}
          class="inline-flex items-center justify-center px-10 py-5 bg-white text-blue-600 hover:bg-gray-100 font-bold rounded-lg shadow-2xl hover:shadow-3xl transition-all text-xl"
          data-aos="fade-up"
          data-aos-delay="200"
        >
          üìû Appelez Maintenant : {business.phone}
        </a>
        <p class="mt-6 text-sm opacity-80">
          R√©ponse garantie ‚Ä¢ Devis gratuit ‚Ä¢ {business.yearsExperience} ans d'exp√©rience
        </p>
      </div>
    </div>
  </section>

  <!-- Schema.org Structured Data -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": business.name,
    "image": hero.image,
    "description": seo.description,
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Aix-en-Provence",
      "addressRegion": "Provence-Alpes-C√¥te d'Azur",
      "postalCode": "13090",
      "addressCountry": "FR"
    },
    "telephone": business.phone,
    "email": business.email,
    "openingHoursSpecification": {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
      "opens": "00:00",
      "closes": "23:59"
    },
    "priceRange": "‚Ç¨‚Ç¨",
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.9",
      "reviewCount": "127"
    },
    "areaServed": zones
  })} />
</Base>

<style>
  details summary::-webkit-details-marker {
    display: none;
  }
</style>