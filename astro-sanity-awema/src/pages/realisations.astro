---
import Base from "@/layouts/Base.astro";
import { Image } from "astro:assets";
import FormulaireMaquette from "@/components/FormulaireMaquette.astro";

// Donn√©es des r√©alisations avec templates Locomotive et Sydney
const realisations = [
  // === PROJETS INFRASTRUCTURE IT ===
  {
    id: 101,
    title: "Migration Cloud PME Marseille",
    metier: "Infrastructure IT",
    ville: "Marseille",
    image: "/images/screenshots/banner-shot.png",
    description: "Migration compl√®te vers OVHcloud - 30 postes + 5 serveurs",
    features: ["Audit infrastructure", "Migration OVHcloud", "Formation √©quipe", "Support 3 mois"],
    results: "40% √©conomies ‚Ä¢ 0 downtime",
    testimonial: "Migration r√©ussie en 2 semaines. Nos co√ªts IT ont baiss√© de 40% et les performances ont doubl√©.",
    category: "cloud"
  },
  {
    id: 102,
    title: "Audit IT Cabinet Comptable Lyon",
    metier: "Audit Infrastructure",
    ville: "Lyon",
    image: "/images/screenshots/banner-shot.png",
    description: "Audit complet infrastructure + plan d'action s√©curit√©",
    features: ["Audit 1 jour sur site", "Rapport 45 pages", "Plan action s√©curit√©", "√âconomies identifi√©es"],
    results: "12k‚Ç¨ √©conomies/an ‚Ä¢ Failles corrig√©es",
    testimonial: "L'audit a r√©v√©l√© des failles critiques que nous ignorions. Le rapport est d'une clart√© exceptionnelle.",
    category: "audit"
  },
  {
    id: 103,
    title: "S√©curisation R√©seau BTP Paris",
    metier: "S√©curit√© IT",
    ville: "Paris",
    image: "/images/screenshots/banner-shot.png",
    description: "Mise en conformit√© RGPD + s√©curisation r√©seau artisan BTP",
    features: ["Audit s√©curit√©", "Pare-feu entreprise", "VPN √©quipe mobile", "Formation RGPD"],
    results: "100% conforme ‚Ä¢ √âquipe mobile s√©curis√©e",
    testimonial: "Nos chantiers sont connect√©s en toute s√©curit√©. La conformit√© RGPD est enfin r√©gl√©e.",
    category: "audit"
  },
  {
    id: 104,
    title: "Cloud AWS E-commerce Toulouse",
    metier: "Migration Cloud",
    ville: "Toulouse",
    image: "/images/screenshots/banner-shot.png",
    description: "Migration site e-commerce vers AWS - haute disponibilit√©",
    features: ["Migration AWS", "Load balancing", "Auto-scaling", "Monitoring 24/7"],
    results: "99.99% uptime ‚Ä¢ Trafic x3 support√©",
    testimonial: "Notre site tient maintenant les pics de trafic sans broncher. Migration transparente pour nos clients.",
    category: "cloud"
  },
  {
    id: 105,
    title: "Modernisation Serveurs Menuiserie Bordeaux",
    metier: "Infrastructure IT",
    ville: "Bordeaux",
    image: "/images/screenshots/banner-shot.png",
    description: "Remplacement serveurs obsol√®tes + virtualisation",
    features: ["Audit mat√©riel", "Virtualisation VMware", "Migration donn√©es", "Backup automatis√©"],
    results: "Performance x2 ‚Ä¢ Budget -30%",
    testimonial: "Nos anciens serveurs de 2010 ont √©t√© remplac√©s. Tout est plus rapide et moins cher √† maintenir.",
    category: "audit"
  },
  {
    id: 106,
    title: "Infrastructure Hybrid Cloud Nice",
    metier: "Migration Cloud",
    ville: "Nice",
    image: "/images/screenshots/banner-shot.png",
    description: "Architecture hybrid cloud - Azure + serveurs locaux",
    features: ["Conception archi hybrid", "Azure setup", "Connexion s√©curis√©e", "DR plan"],
    results: "Flexibilit√© max ‚Ä¢ Donn√©es sensibles on-premise",
    testimonial: "Le meilleur des deux mondes : le Cloud pour la flexibilit√©, nos serveurs pour les donn√©es critiques.",
    category: "cloud"
  },

  // === PROJETS SITES WEB BTP ===
  {
    id: 1,
    title: "EGSL - √âlectricit√© G√©n√©rale",
    metier: "√âlectricien",
    ville: "Marseille",
    image: "/images/screenshots/egsl-pro.jpg",
    description: "Cr√©ation site vitrine premium + Campagne Google Ads optimis√©e",
    features: ["Site WordPress Divi", "Campagne Google Ads", "SEO local PACA", "Formulaire de devis intelligent"],
    results: "200k‚Ç¨ de devis ‚Ä¢ ROI x6",
    testimonial: "AWEMA a transform√© notre pr√©sence en ligne. 200k‚Ç¨ de devis g√©n√©r√©s avec un ROI de 6 !",
    category: "electricien"
  },
  {
    id: 2,
    title: "Plomberie Express Paris",
    metier: "Plombier",
    ville: "Paris",
    image: "/images/screenshots/plomberie-paris.jpg",
    description: "Site moderne Locomotive avec prise de RDV en ligne int√©gr√©",
    features: ["Template Locomotive", "Calendrier en ligne", "Devis automatique", "Galerie avant/apr√®s"],
    results: "+180% de contacts ‚Ä¢ 35 RDV/mois",
    testimonial: "Le syst√®me de RDV en ligne a r√©volutionn√© notre planning. Plus de 35 interventions par mois !",
    category: "plombier"
  },
  {
    id: 3,
    title: "Menuiserie Cr√©ative Neuilly",
    metier: "Menuisier",
    ville: "Neuilly-sur-Seine",
    image: "/images/screenshots/menuiserie-neuilly.jpg",
    description: "Portfolio Sydney premium avec galerie et configurateur",
    features: ["Template Sydney", "Galerie HD", "Devis instantan√©", "Showroom virtuel"],
    results: "Commandes +45% ‚Ä¢ Panier moyen 8500‚Ç¨",
    testimonial: "Le configurateur a doubl√© nos ventes sur mesure. Les clients adorent !",
    category: "menuisier"
  },
  {
    id: 4,
    title: "Ma√ßonnerie Pro Boulogne",
    metier: "Ma√ßon",
    ville: "Boulogne-Billancourt",
    image: "/images/screenshots/maconnerie-boulogne.jpg",
    description: "Site Locomotive corporate pour grands chantiers",
    features: ["Template Locomotive", "Portfolio projets", "Certifications RGE", "Espace pro B2B"],
    results: "5 contrats promoteurs ‚Ä¢ 1.2M‚Ç¨ CA",
    testimonial: "Notre cr√©dibilit√© aupr√®s des promoteurs a explos√© gr√¢ce √† ce site professionnel.",
    category: "macon"
  },
  {
    id: 5,
    title: "Jardins & Paysages Issy",
    metier: "Paysagiste",
    ville: "Issy-les-Moulineaux",
    image: "/images/screenshots/paysagiste-issy.jpg",
    description: "Site Sydney immersif avec galeries avant/apr√®s",
    features: ["Template Sydney", "Galerie avant/apr√®s", "Catalogue v√©g√©taux", "Devis terrain"],
    results: "Projets moyens 25k‚Ç¨ ‚Ä¢ +300% leads",
    testimonial: "Le site a tripl√© nos demandes. Projets moyens pass√©s de 8k √† 25k‚Ç¨ !",
    category: "paysagiste"
  },
  {
    id: 6,
    title: "Carrelage Design Levallois",
    metier: "Carreleur",
    ville: "Levallois-Perret",
    image: "/images/screenshots/carrelage-levallois.jpg",
    description: "Portfolio Locomotive HD avec showroom virtuel",
    features: ["Template Locomotive", "Galerie HD", "Showroom virtuel", "Catalogue mat√©riaux"],
    results: "Tarif horaire +35% ‚Ä¢ Clients premium",
    testimonial: "Notre positionnement haut de gamme est enfin visible. Que des chantiers premium !",
    category: "carreleur"
  },
  {
    id: 7,
    title: "Peinture D√©co Boulogne",
    metier: "Peintre d√©corateur",
    ville: "Boulogne-Billancourt",
    image: "/images/screenshots/peinture-boulogne.jpg",
    description: "Site Sydney artistique avec nuancier interactif",
    features: ["Template Sydney", "Nuancier digital", "Portfolio HD", "Blog conseils"],
    results: "+85% de demandes ‚Ä¢ 12 chantiers/mois",
    testimonial: "Le simulateur de couleurs fait toute la diff√©rence. Les clients arrivent d√©j√† convaincus !",
    category: "peintre"
  },
  {
    id: 8,
    title: "Chauffage Pro Levallois",
    metier: "Chauffagiste",
    ville: "Levallois-Perret",
    image: "/images/screenshots/chauffage-levallois.jpg",
    description: "Site Locomotive avec diagnostic √©nerg√©tique",
    features: ["Template Locomotive", "Diagnostic en ligne", "Calculateur √©conomies", "SAV int√©gr√©"],
    results: "8 PAC/mois ‚Ä¢ CA +120%",
    testimonial: "Le calculateur d'√©conomies rassure les clients. 8 pompes √† chaleur vendues par mois !",
    category: "chauffagiste"
  },
  {
    id: 9,
    title: "Toiture Expert Paris",
    metier: "Couvreur",
    ville: "Paris",
    image: "/images/screenshots/banner-shot-9.png",
    description: "Site rassurant avec garanties et certifications",
    features: ["Inspection drone", "Devis vid√©o", "Garanties"],
    results: "+200% demandes",
    category: "couvreur"
  },
  {
    id: 10,
    title: "Serrurerie 24/7",
    metier: "Serrurier",
    ville: "Paris",
    image: "/images/screenshots/banner-shot-10.png",
    description: "Site urgences avec g√©olocalisation",
    features: ["Urgences GPS", "Tarifs transparents", "Paiement en ligne"],
    results: "30 interventions/semaine",
    category: "serrurier"
  },
  {
    id: 11,
    title: "R√©novation Compl√®te",
    metier: "Multi-corps",
    ville: "Lyon",
    image: "/images/screenshots/banner-shot-11.png",
    description: "Site entreprise g√©n√©rale du b√¢timent",
    features: ["Tous corps d'√©tat", "Suivi chantier", "Espace client"],
    results: "Chantiers 100k‚Ç¨+",
    category: "renovation"
  },
  {
    id: 12,
    title: "Isolation Expert",
    metier: "Isolation",
    ville: "Paris",
    image: "/images/screenshots/banner-shot-12.png",
    description: "Site sp√©cialis√© avec audit √©nerg√©tique",
    features: ["Audit en ligne", "Aides financi√®res", "Bilan thermique"],
    results: "ROI client x5",
    category: "isolation"
  }
];

const categories = [
  { value: "all", label: "Tous les projets", section: "" },
  { value: "sites-web", label: "üì± Sites Web", section: "header" },
  { value: "plombier", label: "Plombier", section: "" },
  { value: "electricien", label: "√âlectricien", section: "" },
  { value: "menuisier", label: "Menuisier", section: "" },
  { value: "macon", label: "Ma√ßon", section: "" },
  { value: "paysagiste", label: "Paysagiste", section: "" },
  { value: "carreleur", label: "Carreleur", section: "" },
  { value: "peintre", label: "Peintre", section: "" },
  { value: "chauffagiste", label: "Chauffagiste", section: "" },
  { value: "couvreur", label: "Couvreur", section: "" },
  { value: "serrurier", label: "Serrurier", section: "" },
  { value: "renovation", label: "R√©novation", section: "" },
  { value: "isolation", label: "Isolation", section: "" },
  { value: "infrastructure", label: "‚òÅÔ∏è Infrastructure IT", section: "header" },
  { value: "cloud", label: "Migration Cloud", section: "" },
  { value: "audit", label: "Audit IT", section: "" }
];

const seoData = {
  meta_title: "Portfolio 300+ Sites Web BTP & IT | R√©alisations AWEMA Aix-Marseille",
  meta_description: "300+ sites cr√©√©s pour artisans BTP (plombier, √©lectricien) & PME PACA. R√©alisations web, migrations cloud, audits IT. R√©sultats prouv√©s. Expert Aix-Marseille.",
};

const schema = {
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "R√©alisations AWEMA - Sites Web BTP & Projets IT",
  "description": "Portfolio de 300+ sites web cr√©√©s pour artisans BTP et projets d'infrastructure IT r√©alis√©s par AWEMA",
  "numberOfItems": realisations.length,
  "itemListElement": realisations.slice(0, 10).map((real, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "item": {
      "@type": "CreativeWork",
      "name": real.title,
      "description": real.description,
      "about": real.metier,
      "locationCreated": {
        "@type": "Place",
        "name": real.ville
      },
      "creator": {
        "@type": "Organization",
        "name": "AWEMA"
      }
    }
  }))
};
---

<Base {...seoData} schema={schema}>
  <!-- Hero Section -->
  <section class="relative min-h-[70vh] flex items-center bg-gradient-to-br from-slate-800 via-slate-700 to-slate-900 text-white overflow-hidden">
    <div class="absolute inset-0 bg-black/10"></div>

    <div class="container relative z-10 py-20">
      <div class="row justify-center">
        <div class="lg:col-10 text-center">
          <div class="inline-block bg-blue-600/90 backdrop-blur-sm px-4 py-2 rounded-full mb-6 shadow-lg">
            <span class="text-white font-semibold">üèÜ Portfolio Client</span>
          </div>

          <h1 class="text-4xl md:text-6xl font-bold mb-6 leading-tight text-white drop-shadow-lg" data-aos="fade-up">
            Nos R√©alisations <span class="text-blue-400">BTP & Artisanat</span>
          </h1>

          <p class="text-xl md:text-2xl mb-10 text-gray-200 max-w-3xl mx-auto" data-aos="fade-up" data-aos-delay="100">
            +300 sites cr√©√©s pour les artisans du BTP.<br/>
            Des exemples concrets de sites qui <strong class="text-white">g√©n√®rent vraiment des clients.</strong>
          </p>

          <div class="grid md:grid-cols-3 gap-6 max-w-3xl mx-auto" data-aos="fade-up" data-aos-delay="200">
            <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
              <div class="text-4xl font-bold text-blue-400 mb-2">300+</div>
              <div class="text-gray-200 font-medium">Sites livr√©s</div>
            </div>
            <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
              <div class="text-4xl font-bold text-blue-400 mb-2">4.9/5</div>
              <div class="text-gray-200 font-medium">Note moyenne</div>
            </div>
            <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
              <div class="text-4xl font-bold text-blue-400 mb-2">100%</div>
              <div class="text-gray-200 font-medium">Satisfaits</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Filtres -->
  <section class="py-8 bg-white sticky top-0 z-40 shadow-sm">
    <div class="container">
      <div class="flex flex-wrap gap-3 justify-center" id="portfolio-filters">
        {categories.map((cat) => (
          <>
            {cat.section === "header" && (
              <div class="w-full text-center font-bold text-gray-600 text-sm mt-2">{cat.label}</div>
            )}
            {cat.section === "" && (
              <button
                data-filter={cat.value}
                class={`px-6 py-2 rounded-full border-2 transition-all ${
                  cat.value === 'all'
                    ? 'bg-primary text-white border-primary'
                    : 'bg-white text-gray-700 border-gray-300 hover:border-primary hover:text-primary'
                }`}
              >
                {cat.label}
              </button>
            )}
          </>
        ))}
      </div>
    </div>
  </section>

  <!-- Portfolio Grid -->
  <section class="section">
    <div class="container">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="portfolio-grid">
        {realisations.map((real, index) => (
          <div
            class="portfolio-item group"
            data-category={real.category}
            data-aos="fade-up"
            data-aos-delay={50 + (index % 3) * 100}
          >
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 h-full flex flex-col">
              <!-- Image container -->
              <div class="relative aspect-video overflow-hidden bg-gray-100">
                <Image
                  class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                  width={600}
                  height={400}
                  alt={real.title}
                  src={real.image.includes('banner-shot-') && !real.image.includes('.png')
                    ? '/images/screenshots/banner-shot.png'
                    : real.image}
                  format="webp"
                />
                <!-- Overlay on hover -->
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                  <div class="p-6 text-white">
                    <p class="text-sm mb-2">{real.metier} ‚Ä¢ {real.ville}</p>
                    <h3 class="text-xl font-bold">{real.title}</h3>
                  </div>
                </div>
                <!-- Badge r√©sultat -->
                <div class="absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                  {real.results}
                </div>
              </div>

              <!-- Content -->
              <div class="p-6 flex-grow flex flex-col">
                <h3 class="text-xl font-bold mb-2">{real.title}</h3>
                <p class="text-gray-600 mb-4">{real.description}</p>

                <!-- Features -->
                <div class="flex flex-wrap gap-2 mb-4">
                  {real.features.map((feature) => (
                    <span class="text-xs px-3 py-1 bg-primary/10 text-primary rounded-full">
                      {feature}
                    </span>
                  ))}
                </div>

                <!-- Testimonial if exists -->
                {real.testimonial && (
                  <div class="bg-gray-50 p-3 rounded-lg mb-4 border-l-4 border-primary">
                    <p class="text-sm italic text-gray-700">"{real.testimonial}"</p>
                    <p class="text-xs text-gray-500 mt-1">- {real.metier} {real.ville}</p>
                  </div>
                )}

                <!-- CTA Button -->
                <div class="mt-auto pt-4">
                  <button
                    class="w-full btn btn-primary transition-all group/btn"
                    data-metier={real.metier}
                    data-ville={real.ville}
                  >
                    <span>Je veux le m√™me</span>
                    <svg class="inline-block ml-2 w-4 h-4 group-hover/btn:translate-x-1 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="relative bg-gradient-to-br from-slate-800 via-slate-700 to-slate-900 text-white py-20">
    <div class="absolute inset-0 bg-black/10"></div>

    <div class="container relative z-10">
      <div class="row justify-center">
        <div class="lg:col-10">
          <div class="text-center mb-12" data-aos="fade-up">
            <h2 class="text-4xl md:text-5xl font-bold mb-6 text-white">
              Votre site peut √™tre le prochain succ√®s
            </h2>
            <p class="text-xl text-gray-200 mb-8">
              Rejoignez les 300+ artisans qui g√©n√®rent des clients avec leur site AWEMA
            </p>
          </div>

          <!-- Benefits Grid -->
          <div class="grid md:grid-cols-3 gap-6 mb-12" data-aos="fade-up" data-aos-delay="100">
            <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 text-center">
              <div class="text-4xl mb-3">‚ö°</div>
              <h3 class="font-bold text-lg mb-2 text-white">Livraison en 15 jours</h3>
              <p class="text-sm text-gray-300">Site professionnel cl√© en main</p>
            </div>
            <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 text-center">
              <div class="text-4xl mb-3">üí∞</div>
              <h3 class="font-bold text-lg mb-2 text-white">√Ä partir de 1990‚Ç¨</h3>
              <p class="text-sm text-gray-300">Sans abonnement cach√©</p>
            </div>
            <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 text-center">
              <div class="text-4xl mb-3">‚úÖ</div>
              <h3 class="font-bold text-lg mb-2 text-white">Satisfait ou rembours√©</h3>
              <p class="text-sm text-gray-300">Garantie 30 jours</p>
            </div>
          </div>

          <!-- CTA Buttons -->
          <div class="flex flex-wrap gap-4 justify-center" data-aos="fade-up" data-aos-delay="200">
            <a href="#formulaire-maquette" class="inline-block px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white rounded-lg font-bold transition-all hover:scale-105 shadow-2xl text-lg">
              Recevoir mes 3 maquettes gratuites
            </a>
            <a href="/contact" class="inline-block px-8 py-4 bg-white/10 backdrop-blur-lg border-2 border-white/30 hover:bg-white/20 text-white rounded-lg font-bold transition-all text-lg">
              Discuter de mon projet
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Formulaire de capture int√©gr√© -->
  <section class="section" id="formulaire-maquette">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-10">
          <FormulaireMaquette
            title="Vous avez trouv√© votre style ?"
            subtitle="Recevez 3 maquettes personnalis√©es de votre futur site en 24h"
            urgencyMessage="üî• Offre limit√©e aux 5 prochains inscrits"
          />
        </div>
      </div>
    </div>
  </section>
</Base>

<!-- JavaScript pour le filtrage et les interactions -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Portfolio filtering
    const filters = document.querySelectorAll('#portfolio-filters button');
    const items = document.querySelectorAll('.portfolio-item');

    filters.forEach(filter => {
      filter.addEventListener('click', () => {
        const filterValue = filter.dataset.filter;

        // Update active filter
        filters.forEach(f => {
          f.classList.remove('bg-primary', 'text-white', 'border-primary');
          f.classList.add('bg-white', 'text-gray-700', 'border-gray-300');
        });
        filter.classList.remove('bg-white', 'text-gray-700', 'border-gray-300');
        filter.classList.add('bg-primary', 'text-white', 'border-primary');

        // Filter items
        items.forEach(item => {
          if (filterValue === 'all' || item.dataset.category === filterValue) {
            item.style.display = 'block';
            setTimeout(() => {
              item.style.opacity = '1';
              item.style.transform = 'scale(1)';
            }, 10);
          } else {
            item.style.opacity = '0';
            item.style.transform = 'scale(0.95)';
            setTimeout(() => {
              item.style.display = 'none';
            }, 300);
          }
        });
      });
    });

    // "Je veux le m√™me" button click
    const ctaButtons = document.querySelectorAll('.portfolio-item button');
    ctaButtons.forEach(button => {
      button.addEventListener('click', () => {
        const metier = button.dataset.metier;
        const ville = button.dataset.ville;

        // Scroll to form
        const formSection = document.getElementById('formulaire-maquette');
        if (formSection) {
          formSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

          // Pre-fill form if possible
          setTimeout(() => {
            const metierSelect = document.querySelector('select[name="metier"]');
            const villeInput = document.querySelector('input[name="city"]');

            if (metierSelect) {
              const metierValue = metier.toLowerCase().replace('√©', 'e').replace('√ß', 'c');
              metierSelect.value = metierValue;
            }

            if (villeInput) {
              villeInput.value = ville;
            }
          }, 500);
        }
      });
    });

    // Add transition styles
    const style = document.createElement('style');
    style.textContent = `
      .portfolio-item {
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
    `;
    document.head.appendChild(style);
  });
</script>