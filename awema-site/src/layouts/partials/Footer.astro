---
import Logo from "@/components/Logo.astro";
import { params } from "@/config/config.json";
import menu from "@/config/menu.json";
import social from "@/config/social.json";
import DynamicIcon from "@/helpers/DynamicIcon";
import { markdownify, plainify } from "@/lib/utils/textConverter";
import type { INavigationLink } from "@/types";
import { Image } from "astro:assets";
const { footer }: { footer: INavigationLink[] } = menu;
const { call_to_action, copyright, footer_content, subscribe } = params;
---

<footer class="section-lg bg-light has-shapes pb-0">
  <Image
    class={"absolute top-0 left-0 w-full h-auto"}
    width={732}
    height={1050}
    alt={""}
    src={"/images/brushes/footer.svg"}
  />
  <div class="container">
    <div class="row justify-center">
      <div class="lg:col-6 col-12 text-center">
        <div class="mb-10">
          <h2 class="mb-7" set:html={markdownify(call_to_action.content)} />

          {
            call_to_action.button.enable && (
              <a
                href={call_to_action.button.href}
                class="btn btn-primary has-icon mb-5"
                type="submit"
              >
                {plainify(call_to_action.button.label)}
                <span class="icon">
                  <DynamicIcon width={26} height={26} icon="FaAngleRight" />
                </span>
              </a>
            )
          }
        </div>
      </div>
    </div>

    <div class="border-b border-border/30"></div>
    <div class="row mt-1 mb-16 lg:my-16 gy-5 lg:gy-0">
      <div class="lg:col-4 sm:col-6 col-12">
        <div class="max-w-xs">
          <Logo />
          <p class="mt-7 leading-7" set:html={markdownify(footer_content)} />
        </div>
      </div>

      {
        footer.map((nav) => (
          <div class="lg:col-2 sm:col-3">
            <div>
              <p class="font-semibold mb-5 h5">{nav.name}</p>
              {nav.children && nav.children.length > 0 && (
                <ul class="space-y-2">
                  {nav.children?.map((link) => (
                    <li>
                      <a
                        class="font-medium capitalize hover:text-de text-text-light hover:text-primary transition hover:underline underline-offset-2 duration-300"
                        href={link.url}
                      >
                        {link.name}
                      </a>
                    </li>
                  ))}
                </ul>
              )}
            </div>
          </div>
        ))
      }

      <div class="lg:col-2 sm:col-3">
        <div>
          <h5 class="font-semibold mb-5">Contact</h5>
          <ul class="space-y-2">
            <li>
              <a
                class="font-medium hover:text-de text-text-light hover:text-primary transition hover:underline underline-offset-2 duration-300 flex items-center"
                href="tel:0617540383"
              >
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                </svg>
                06.17.54.03.83
              </a>
            </li>
            <li>
              <a
                class="font-medium hover:text-de text-text-light hover:text-primary transition hover:underline underline-offset-2 duration-300 flex items-center"
                href="mailto:contact@awema.fr"
              >
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
                contact@awema.fr
              </a>
            </li>
            {
              social.main.map((social) => (
                <li>
                  <a
                    class="font-medium capitalize hover:text-de text-text-light hover:text-primary transition hover:underline underline-offset-2 duration-300"
                    href={social.link}
                  >
                    {social.name}
                  </a>
                </li>
              ))
            }
          </ul>
        </div>
      </div>
      <div class="lg:col-4 md:col-6">
        <div>
          <h5 class="font-semibold mb-5">Lets Subscribe Your Email</h5>
          {
            subscribe.enable && (
              <form action={subscribe.action} method="post" novalidate>
                <div class="flex lg:max-w-[342px]">
                  <input
                    type="email"
                    class="form-input rounded-tr-none rounded-br-none"
                    placeholder="Your email address"
                    required
                  />
                  <button
                    aria-label="submit"
                    class="btn bg-primary text-white rounded-tl-none rounded-bl-none flex items-center justify-center py-5"
                    type="submit"
                  >
                    <svg
                      width="31"
                      height="16"
                      viewBox="0 0 31 16"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M30.7071 8.70808C31.0976 8.31756 31.0976 7.68439 30.7071 7.29387L24.3431.929909C23.9526.539384 23.3195.539384 22.9289.929909 22.5384 1.32043 22.5384 1.9536 22.9289 2.34412l5.6569 5.65686-5.6569 5.65682C22.5384 14.0484 22.5384 14.6815 22.9289 15.072 23.3195 15.4626 23.9526 15.4626 24.3431 15.072l6.364-6.36392zM0 9.00098H30v-2H0v2z"
                        fill="#fff"
                      />
                    </svg>
                  </button>
                </div>
              </form>
            )
          }
        </div>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="container">
      <div class="row">
        <div class="col-12 border-t border-border/30 pb-5">
          <div
            class="content pt-10 text-center font-medium"
            set:html={markdownify(copyright)}
          />
        </div>
      </div>
    </div>
  </div>
</footer>
